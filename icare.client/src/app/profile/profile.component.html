<p *ngIf="!user"><em>Loading...</em></p>

<form *ngIf="user" (ngSubmit)="updateUser()" class="m-0">
  <container class="m-0">
    <!-- Profile Image -->
    <div class="image-wrapper">
      <profile-image id="image" [imageUrl]="user.picture" [editable]="true" (imageChange)="changePicture($event)" />
    </div>
    <br />
    <!-- Profile Name -->
    <custom-input type="text"
                  placeholder="Insira o seu nome"
                  id="name"
                  name="Nome:"
                  [value]="user.name"
                  (valueChange)="changeName($event)" />
    <br />
    <!-- Profile Email -->
    <custom-input type="email"
                  placeholder="Insira o seu email"
                  id="email"
                  name="Email*:"
                  [value]="user.email"
                  (valueChange)="changeEmail($event)" />
    <br />
    <!-- Profile Birthdate -->
    <custom-input type="date"
                  placeholder="Insira a sua data de nascimento"
                  id="birthdate"
                  name="Data de Nascimento:"
                  [value]="user.birthdate"
                  (valueChange)="changeBirthdate($event)" />
    <br />
    <!-- Profile Height -->
    <custom-input type="number"
                  placeholder="Insira a sua altura"
                  id="height"
                  name="Altura:"
                  [value]="user.height"
                  (valueChange)="changeHeight($event)" />
    <br />
    <!-- Profile Weight -->
    <custom-input type="number"
                  placeholder="Insira a sua altura"
                  id="weight"
                  name="Peso:"
                  [value]="user.weight"
                  (valueChange)="changeWeight($event)" />
    <br />
    <!-- Profile Notifications -->
    <custom-checkbox [checked]="user.notifications"
                     (checkedChange)="user.notifications = $event"
                     label="Notificações"
                     id="notifications" />
    <br />
  </container>

  <!-- Profile Preferences -->
  <!--<container class="m-0">
    <p>Preferências</p>
    <category-selector listId="preferencesList"
                       placeholder="Procure as suas preferências..."
                       [options]="Array.from(user.categories)"
                       [selectedItems]="Array.from(user.preferences)"
                       (addItem)="addPreference($event)"
                       (onRemove)="removePreference($event)" />
  </container>
  <container class="m-0">
    <p>Restrições</p>
    <category-selector listId="restrictionsList"
                       placeholder="Procure as suas restrições..."
                       [options]="Array.from(user.categories)"
                       [selectedItems]="Array.from(user.restrictions)"
                       (addItem)="addRestriction($event)"
                       (onRemove)="removeRestriction($event)" />
  </container>-->

  <container class="m-0" customClass="custom-style">
    <p>Preferências</p>
    <div class="d-flex gap-1 bg-bege-contrast p-1 rounded">
      <input list="preferencesList"
             class="form-control"
             placeholder="Search preferences..."
             (change)="addPreference($event)" />
      <datalist id="preferencesList">
        <option *ngFor="let p of user.categories" [value]="p">
          {{ p }}
        </option>
      </datalist>
    </div>
    <div class="selected-items">
      <button (click)="removePreference(p)"
              *ngFor="let p of user.preferences"
              class="selected-item shadow">
        {{ p }}
      </button>
    </div>
  </container>
  <container class="m-0" customClass="custom-style">
    <p>Restrições</p>
    <div class="d-flex gap-1 bg-bege-contrast p-1 rounded">
      <input list="restrictionsList"
             class="form-control"
             placeholder="Search restrictions..."
             (change)="addRestriction($event)" />
      <datalist id="restrictionsList">
        <option *ngFor="let r of user.categories" [value]="r">
          {{ r }}
        </option>
      </datalist>
    </div>
    <div class="selected-items">
      <button *ngFor="let r of user.restrictions"
              (click)="removeRestriction(r)"
              class="selected-item">
        {{ r }}
      </button>
    </div>
  </container>

  <div class="m-0 buttons">
    <input class="change-password rounded"
           type="button"
           value="Trocar Palavra-Passe"
           (click)="changePassword()" />
    <input type="submit"
           value="Salvar"
           class="submit-btn rounded" />
  </div>
</form>
