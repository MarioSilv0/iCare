<div class="container">
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="search-bar">
      <input type="text" placeholder="Pesquisar" />
      <span class="search-icon">🔍</span>
    </div>
    <ul class="item-list" *ngIf="listOfItems.size > 0">
      <li *ngFor="let item of listOfItemsArray"
          [class.selected]="selectedItems.has(item)"
          (click)="toggleSelection(item)">
        {{ item }}
      </li>
    </ul>
    <button class="add-button" (click)="addItemsToInventory()">
      Adicionar ➕
    </button>
  </div>

  <!-- Inventory Table -->
  <div class="inventory-table">
    <table>
      <thead>
        <tr>
          <th class="small-col"></th>
          <th class="small-col">
            <input type="checkbox"
                   [checked]="selectedItemsInInventory.size === inventory.size"
                   (change)="toggleAllInventorySelection()">
          </th>
          <th class="large-col">Nome</th>
          <th class="small-col">Quantidade</th>
        </tr>
      </thead>
      <tbody *ngIf="inventory.size > 0">
        <ng-container *ngFor="let item of inventory | mapKeys">
          <tr>

            <td (click)="toggleDetails(item)">
              {{ expandedItems.has(item) ? '▼' : '▶️' }}
            </td>

            <td>
              <input type="checkbox"
                     [checked]="selectedItemsInInventory.has(item)"
                     (change)="toggleInventorySelection(item)">
            </td>

            <td>{{ item }}</td>

            <td>
              <input type="number"
                     [value]="inventory.get(item)"
                     (input)="updateQuantity(item, $event)" />
            </td>

          </tr>
          <tr *ngIf="expandedItems.has(item)">
            <td colspan="4">
              <div class="item-details">
                <p *ngIf="!itemDetails.has(item)" (click)="getItemDetails(item)">A carregar...</p>
                <p *ngIf="itemDetails.has(item)">{{ itemDetails.get(item) }}</p>
              </div>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
    <div class="buttons-container">
      <button class="update-button" (click)="updateItemsInInventory()">Atualizar Inventário</button>
      <button class="delete-button" (click)="removeItemFromInventory()">
        Excluir <span class="trash-icon">🗑️</span>
      </button>
    </div>
  </div>
</div>
